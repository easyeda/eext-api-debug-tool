<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8" />
		<title>Ace Editor - EDA</title>
		<link rel="stylesheet" href="/iframe/style/body.css" />
	</head>
	<body>
		<div id="app">
			<div id="sidebar">
				<ul>
					<li><button id="run-btn">运行</button></li>
					<li><button id="load-btn">加载</button></li>
					<li><button id="save-btn">保存</button></li>
					<li><button id="example-btn">案例</button></li>
					<li><button id="setting-btn">设置</button></li>
					<li><button id="ai-btn">AI辅助</button></li>
					<li><button id="run-btn">关于</button></li>
				</ul>
			</div>
			<div id="editor-container">
				<div id="editor"></div>
			</div>
		</div>

		<!-- Ace 资源（全静态加载） -->
		<script src="/iframe/script/Ace_Editor/ace.js"></script>
		<script src="/iframe/script/Ace_Editor/ext-language_tools.js"></script>
		<script src="/iframe/script/Ace_Editor/mode-javascript.js"></script>
		<script src="/iframe/script/Ace_Editor/theme-monokai.js"></script>

		<!-- 一些编辑器支持 不想每个都写注释了 自己跳进去看吧 -->
		<script src="/iframe/script/User_config/message.js"></script>
		<script src="/iframe/script/eda_coder/EDA_Codes.js"></script>
		<script src="/iframe/script/User_config/ACE_Config.js"></script>
		<script src='/iframe/script/User_config/Code_Config.js'></script>

		<script>
			//初始化Ace 编辑器
			const editor = ace.edit('editor');
			ACE_Init(editor);

			// 注册放大缩小代码支持
			let currentFontSize = 14;
			ACE_ChangeCodeSize(editor, currentFontSize, showToast);

			//注册EDA智能补全
			ACE_CodingForEDA(editor, edcode);

			// 运行代码
			document.getElementById('run-btn').addEventListener('click', () => {
				ACE_RunCode(editor);
			});
			// 开启AI辅助支持
			document.getElementById('ai-btn').addEventListener('click', () => {
				activateECTAI();
			});
			
			// 保存代码
			document.getElementById('save-btn').addEventListener('click', () => {
				Code_OpenSaveWindows(editor);
			});
			//加载代码
			document.getElementById('load-btn').addEventListener('click', () => {
				Code_OpenLoadWindows(editor);
			});
		</script>
	</body>
</html>